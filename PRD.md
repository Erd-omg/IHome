### **PRD 文档：IHome 宿舍管理系统**

#### **1. 项目概述**

IHome 是一款用于大学宿舍管理的综合性系统，旨在为学生和管理员提供高效、便捷的宿舍管理服务。系统包含学生端和管理员端，涵盖宿舍分配、缴费、维修、个人信息管理等核心功能，并引入了智能分配算法，以提升用户体验和管理效率。

---

#### **2. 功能模块**

##### **2.1 学生端**

* **首页模块**：
    * [cite_start]**核心功能入口**：展示调换宿舍、在线缴费、在线维修、修改个人信息等功能图标，并支持点击跳转。
    * [cite_start]**通知公告**：展示最新的宿舍通知，按发布时间倒序排列 [cite: 24, 96]。
    * [cite_start]**搜索功能**：提供搜索框，支持模糊查找宿舍、缴费、维修等信息 。
* **宿舍管理模块**：
    * **新生宿舍分配**：
        * [cite_start]**自动分配**：系统根据专业优先原则自动为新生分配宿舍 。
        * [cite_start]**床位分配**：新生在被分配宿舍后，可自主选择床位 [cite: 24, 65, 244][cite_start]。系统会根据学生的特殊标签（如“行动不便”）优先推荐下铺 [cite: 24, 66, 244, 245]。
    * **调换宿舍申请**：
        * [cite_start]**提交申请**：学生可填写表单，提交调换宿舍的申请，并说明原因 [cite: 24, 67, 283]。
        * [cite_start]**申请状态**：学生可查看申请状态（未处理、审批中、已通过、已驳回）[cite: 305]。
    * **宿舍信息查询**：
        * [cite_start]**信息查询**：学生可查询宿舍的基本信息和空余床位情况 [cite: 24, 336, 346]。
* **缴费管理模块**：
    * [cite_start]**在线缴费**：学生可选择缴费类型（住宿费、电费等），自定义缴费金额，并支持多种支付方式 [cite: 24, 68, 372, 373]。
    * [cite_start]**缴费记录**：记录每次缴费的类型、金额和时间，学生可按时间进行模糊查询 [cite: 24, 69, 413]。
    * [cite_start]**缴费通知**：学生可设置电费提醒阈值，当电费低于该阈值时，系统自动发送通知 [cite: 24, 70, 449]。
* **维修管理模块**：
    * [cite_start]**维修申请**：学生可提交维修工单，说明损坏情况并上传图片 [cite: 24, 71, 502]。
    * [cite_start]**维修记录**：记录每次维修的详细信息，学生可查看维修进度和结果，并进行反馈 [cite: 24, 72, 73, 74, 538]。
* **个人模块**：
    * [cite_start]**账号注册与登录**：学生可通过学号或手机号注册和登录 [cite: 27, 614]。
    * [cite_start]**个人信息管理**：学生可查看和编辑个人信息（如昵称、头像、简介、生活习惯标签），但宿舍信息不可修改 [cite: 28, 75, 691, 692]。

##### **2.2 管理端**

* **仪表盘**：
    * [cite_start]**数据展示**：通过统计卡片和图表（饼状图、柱状图、折线图），实时展示关键数据，如宿舍总数、入住宿舍数、维修请求趋势、缴费情况等 [cite: 28, 78, 79, 749]。
* **宿舍管理模块**：
    * [cite_start]**宿舍信息管理**：管理员可新增、删除宿舍，并查看宿舍的具体信息，包括所住学生信息 [cite: 28, 80]。
    * [cite_start]**申请审核**：管理员可审核学生的宿舍调换申请，并进行同意或驳回操作 [cite: 28, 81]。
    * [cite_start]**数据导出**：支持导出宿舍信息数据 [cite: 28, 204]。
* **缴费管理模块**：
    * [cite_start]**缴费信息管理**：展示所有缴费记录，并支持处理缴费失败或退款等异常情况 [cite: 29, 83]。
* **维修管理模块**：
    * [cite_start]**维修信息管理**：展示所有维修工单，并可根据学生反馈改进服务 [cite: 29, 85][cite_start]。管理员可按状态筛选工单（如“未完成”、“已完成”）[cite: 847]。
* **个人模块**：
    * [cite_start]**账号管理**：管理员可通过账号和密码登录管理端 [cite: 27]。

---

#### **3. 核心算法与规则**

##### **3.1 宿舍智能分配与调换算法**

* **问卷设计**：
    * **问题**：作息时间、卫生习惯、对声音的容忍度、是否介意在宿舍吃东西、集体消费习惯等。
    * **作息时间选项**：早睡早起（10点前睡，7点前起）、晚睡晚起（12点后睡，9点后起）、规律作息、作息随意。
* **匹配算法**：
    * **混合推荐模型**：初期采用**权重匹配算法**，后期结合**协同过滤**。
    * [cite_start]**权重计算**：采用加权平均值，作息时间和卫生习惯的权重最高，权重简单相加 [cite: 28, 76]。
* **分配规则**：
    * [cite_start]**专业优先**：新生宿舍分配优先考虑专业一致性 [cite: 24, 196]。
    * **智能分配**：在专业一致的基础上，再根据智能算法计算匹配度进行分配。
    * [cite_start]**下铺优先**：优先为带有“行动不便”等特殊标签的学生分配下铺 [cite: 24, 215, 244, 245]。
    * [cite_start]**调换推荐**：在调换宿舍时，系统可根据匹配度分数向学生推荐新室友。

##### **3.2 智能助手功能**

* **功能**：提供文字交互，回答用户提出的各类问题。
* [cite_start]**数据访问**：根据用户权限访问宿舍分配、缴费、维修、通知公告等实时数据。

---

#### **4. 技术与部署**

* **后端**：Spring Boot + MyBatis Plus
* **前端**：Vue + VueRouter + Vuex + Element UI
* **接口调试**：Swagger
* **数据模拟**：MockJS
* [cite_start]**身份认证**：JWT，采用**令牌自动刷新机制**，令牌有效期为 10 分钟 [cite: 613, 620]。
* **后台管理**：vue-admin-template
* **项目部署**：阿里云 ECS + Nginx + MySQL
* **用户规模**：预估 3000

---

#### **5. 数据模型**

* **`students` 表**：存储学生基本信息。
* [cite_start]**`admins` 表**：存储管理员信息，包括角色类别（宿管员、系统管理员）[cite: 648]。
* [cite_start]**`roommate_tags` 表**：存储学生的个人生活习惯标签 [cite: 76]。
* **`questionnaire_answers` 表（新表）**：存储问卷答案，与 `students` 表关联。
* [cite_start]**`dormitories` 表**：存储宿舍房间信息，如宿舍号、房型、床位数等 [cite: 222, 223]。
* [cite_start]**`beds` 表**：存储床位信息，包括床号、床型、状态等 [cite: 230, 232]。
* [cite_start]**`dormitory_allocations` 表**：存储学生住宿分配记录 [cite: 237, 238, 267]。
* [cite_start]**`payment_records` 表**：存储缴费记录 [cite: 432, 433]。
* [cite_start]**`repair_orders` 表**：存储维修申请工单 [cite: 521, 522]。
* [cite_start]**`repair_records` 表**：存储维修处理记录 [cite: 559, 560]。

---

#### **6. 权限管理**

* [cite_start]**学生端**：用户注册并登录后可浏览首页和使用各类功能 [cite: 89]。
* **管理员端**：
    * [cite_start]**角色分级**：`系统管理员`（拥有最高权限）和 `宿管员`（可管理特定楼栋的宿舍、处理维修和缴费申请）[cite: 648]。
    * [cite_start]**访问控制**：仅管理员可访问仪表盘、宿舍管理、缴费管理、维修管理等模块 [cite: 206, 286, 297, 849, 856]。
    * [cite_start]**操作日志**：所有增删查改操作需记录日志 [cite: 95]。

---