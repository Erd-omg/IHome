# IHome系统完整功能测试指南

## 📋 测试概述

### 测试环境
- **前端地址**: http://localhost:5173 (本地) / http://[IP]:5173 (局域网)
- **后端API**: http://localhost:8080/api (本地) / http://[IP]:8080/api (局域网)
- **API文档**: http://localhost:8080/api/swagger-ui.html
- **健康检查**: http://localhost:8080/api/health

### 系统状态检查
在开始测试前，请确保：
1. 后端服务正常运行在8080端口
2. 前端服务正常运行在5173端口
3. 数据库连接正常
4. 所有API接口可正常访问

### 测试账号
| 角色 | 账号 | 密码 | 姓名 | 说明 |
|------|------|------|------|------|
| 学生 | 2024001 | password | 张三 | 计算机学院 |
| 学生 | 2024002 | password | 李四 | 计算机学院 |
| 学生 | 2024003 | password | 黄冠亨 | 武术学院 |
| 学生 | 2024998 | password | 测试用户 | 测试学院 |
| 管理员 | ADMIN001 | password | 王宿管 | 宿管员 |
| 管理员 | ADMIN002 | password | 管理员2 | 宿管员 |
| 管理员 | ADMIN003 | password | 王管理员 | 宿管员 |
| 管理员 | ADMIN004 | password | 测试管理员 | 系统管理员 |

---

## 🔐 用户认证测试

### 1. 学生登录测试
**测试步骤：**
1. 访问前端页面
2. 点击"学生登录"
3. 输入账号：`2024001`，密码：`password`
4. 点击登录按钮

**预期结果：**
- ✅ 登录成功，跳转到学生主页
- ✅ 显示用户信息：张三，计算机学院
- ✅ 获得JWT访问令牌

**API测试：**
```bash
curl -X POST http://localhost:8080/api/students/login \
  -H "Content-Type: application/json" \
  -d '{"id":"2024001","password":"password"}'
```

### 2. 管理员登录测试
**测试步骤：**
1. 访问前端页面
2. 点击"管理员登录"
3. 输入账号：`ADMIN001`，密码：`password`
4. 点击登录按钮

**预期结果：**
- ✅ 登录成功，跳转到管理员主页
- ✅ 显示管理员信息：王宿管，宿管员
- ✅ 获得管理员权限

**API测试：**
```bash
curl -X POST http://localhost:8080/api/admin/login \
  -H "Content-Type: application/json" \
  -d '{"id":"ADMIN001","password":"password"}'
```

### 3. 学生注册测试
**测试步骤：**
1. 访问前端页面
2. 点击"学生注册"
3. 填写注册信息：
   - 学号：`2024999`
   - 姓名：`新学生`
   - 密码：`password`
   - 确认密码：`password`
   - 手机号：`13900000000`
   - 邮箱：`new@student.com`
   - 性别：`男`
   - 学院：`测试学院`
   - 专业：`测试专业`
4. 点击注册按钮

**预期结果：**
- ✅ 注册成功，自动登录
- ✅ 跳转到学生主页
- ✅ 显示新注册用户信息

---

## 🏠 宿舍管理功能测试

### 1. 宿舍信息查看
**测试步骤：**
1. 以学生身份登录
2. 进入"宿舍信息"页面
3. 查看当前宿舍分配情况

**预期结果：**
- ✅ 显示宿舍楼信息
- ✅ 显示房间信息
- ✅ 显示床位状态
- ✅ 显示室友信息

### 2. 宿舍分配申请
**测试步骤：**
1. 以学生身份登录
2. 进入"宿舍申请"页面
3. 选择心仪的宿舍和床位
4. 填写申请理由
5. 提交申请

**预期结果：**
- ✅ 申请提交成功
- ✅ 显示申请状态：待审核
- ✅ 管理员可以看到申请

### 3. 宿舍调换申请
**测试步骤：**
1. 以学生身份登录
2. 进入"宿舍调换"页面
3. 选择目标学生和床位
4. 填写调换理由
5. 提交调换申请

**预期结果：**
- ✅ 调换申请提交成功
- ✅ 显示申请状态：待审核
- ✅ 目标学生收到通知

---

## ⚡ 电费提醒系统测试

### 1. 电费账单管理
**测试步骤：**
1. 以学生身份登录
2. 进入"电费管理"页面
3. 查看当前电费账单
4. 查看余额和用电量

**预期结果：**
- ✅ 显示当前电费账单
- ✅ 显示余额和用电量信息
- ✅ 显示缴费状态
- ✅ 支持按时间查询账单

**API测试：**
```bash
# 获取学生电费账单
curl -X GET "http://localhost:8080/api/electricity/bills/student/2024001" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### 2. 电费提醒设置
**测试步骤：**
1. 以学生身份登录
2. 进入"电费提醒"页面
3. 设置余额提醒阈值（如：50元）
4. 设置截止日期提醒（如：提前3天）
5. 保存设置

**预期结果：**
- ✅ 提醒设置保存成功
- ✅ 显示当前提醒配置
- ✅ 支持修改提醒设置

**API测试：**
```bash
# 设置电费提醒
curl -X POST "http://localhost:8080/api/electricity/reminders" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{"balanceThreshold": 50, "daysBeforeDeadline": 3}'
```

### 3. 电费缴费功能
**测试步骤：**
1. 以学生身份登录
2. 进入"电费缴费"页面
3. 选择需要缴费的账单
4. 输入缴费金额
5. 选择支付方式
6. 确认支付

**预期结果：**
- ✅ 缴费页面正常显示
- ✅ 支持自定义缴费金额
- ✅ 支付流程完整
- ✅ 缴费记录正确保存

**API测试：**
```bash
# 电费缴费
curl -X POST "http://localhost:8080/api/electricity/payments" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{"billId": 1, "amount": 100, "paymentMethod": "微信支付"}'
```

### 4. 电费统计查询
**测试步骤：**
1. 以学生身份登录
2. 进入"电费统计"页面
3. 查看缴费历史
4. 查看用电趋势

**预期结果：**
- ✅ 显示缴费历史记录
- ✅ 显示用电趋势图表
- ✅ 支持按时间范围查询
- ✅ 显示统计汇总信息

---

## 🔧 维修报修功能测试

### 1. 提交维修申请
**测试步骤：**
1. 以学生身份登录
2. 进入"维修报修"页面
3. 选择维修类型：水电/空调/门窗/其他
4. 选择紧急程度：一般/紧急
5. 填写问题描述
6. 上传相关图片（可选）
7. 提交申请

**预期结果：**
- ✅ 维修申请提交成功
- ✅ 获得维修单号
- ✅ 显示申请状态：待处理
- ✅ 管理员收到通知

### 2. 查看维修进度
**测试步骤：**
1. 以学生身份登录
2. 进入"我的维修"页面
3. 查看维修申请列表
4. 点击查看详情

**预期结果：**
- ✅ 显示所有维修申请
- ✅ 显示当前状态
- ✅ 显示处理进度
- ✅ 显示维修人员信息

---

## 💰 费用管理功能测试

### 1. 费用查询
**测试步骤：**
1. 以学生身份登录
2. 进入"费用查询"页面
3. 查看费用明细

**预期结果：**
- ✅ 显示住宿费用
- ✅ 显示水电费用
- ✅ 显示其他费用
- ✅ 显示缴费状态

### 2. 在线缴费
**测试步骤：**
1. 以学生身份登录
2. 进入"费用缴费"页面
3. 选择需要缴费的项目
4. 选择支付方式
5. 确认支付

**预期结果：**
- ✅ 支付页面正常显示
- ✅ 支付流程完整
- ✅ 支付成功后更新状态

---

## 📢 通知公告功能测试

### 1. 查看通知
**测试步骤：**
1. 以学生身份登录
2. 进入"通知公告"页面
3. 查看通知列表
4. 点击查看详情

**预期结果：**
- ✅ 显示所有通知
- ✅ 按时间排序
- ✅ 支持分页显示
- ✅ 详情页面正常

### 2. 发布通知（管理员）
**测试步骤：**
1. 以管理员身份登录
2. 进入"通知管理"页面
3. 点击"发布通知"
4. 填写通知内容：
   - 标题：`测试通知`
   - 内容：`这是一条测试通知`
   - 类型：`重要通知`
   - 目标用户：`全体学生`
5. 发布通知

**预期结果：**
- ✅ 通知发布成功
- ✅ 学生端可以看到通知
- ✅ 通知按优先级显示

---

## 👥 用户管理功能测试（管理员）

### 1. 学生管理
**测试步骤：**
1. 以管理员身份登录
2. 进入"学生管理"页面
3. 查看学生列表
4. 搜索特定学生
5. 查看学生详情
6. 编辑学生信息

**预期结果：**
- ✅ 显示所有学生信息
- ✅ 支持按姓名、学号搜索
- ✅ 支持分页显示
- ✅ 可以编辑学生信息

### 2. 宿舍管理
**测试步骤：**
1. 以管理员身份登录
2. 进入"宿舍管理"页面
3. 查看宿舍楼信息
4. 查看房间信息
5. 查看床位状态
6. 分配宿舍

**预期结果：**
- ✅ 显示宿舍楼结构
- ✅ 显示房间和床位状态
- ✅ 可以分配学生到宿舍
- ✅ 支持批量操作

### 3. 分配审核
**测试步骤：**
1. 以管理员身份登录
2. 进入"分配审核"页面
3. 查看待审核申请
4. 审核学生申请：
   - 点击"通过"或"拒绝"
   - 填写审核意见
5. 提交审核结果

**预期结果：**
- ✅ 显示所有待审核申请
- ✅ 可以查看申请详情
- ✅ 审核结果正确保存
- ✅ 学生收到审核结果通知

### 4. 调换审核
**测试步骤：**
1. 以管理员身份登录
2. 进入"调换审核"页面
3. 查看待审核调换申请
4. 审核调换申请
5. 提交审核结果

**预期结果：**
- ✅ 显示所有调换申请
- ✅ 可以查看双方学生信息
- ✅ 审核结果正确保存
- ✅ 相关学生收到通知

### 5. 维修处理
**测试步骤：**
1. 以管理员身份登录
2. 进入"维修管理"页面
3. 查看维修申请列表
4. 分配维修人员
5. 更新维修状态
6. 填写维修结果

**预期结果：**
- ✅ 显示所有维修申请
- ✅ 可以分配维修人员
- ✅ 状态更新正确
- ✅ 学生可以看到进度

---

## 📊 数据导出功能测试

### 1. 学生信息导出
**测试步骤：**
1. 以管理员身份登录
2. 进入"数据导出"页面
3. 选择"学生信息导出"
4. 点击"导出Excel"按钮
5. 下载并检查导出文件

**预期结果：**
- ✅ 导出功能正常
- ✅ Excel文件包含完整学生信息
- ✅ 表头格式正确：学号、姓名、性别、专业、年级、邮箱、状态
- ✅ 数据内容准确

**API测试：**
```bash
# 导出学生信息
curl -X GET "http://localhost:8080/api/export/students/excel" \
  -H "Authorization: Bearer YOUR_ADMIN_JWT_TOKEN" \
  --output students.xlsx
```

### 2. 宿舍信息导出
**测试步骤：**
1. 以管理员身份登录
2. 进入"数据导出"页面
3. 选择"宿舍信息导出"
4. 点击"导出Excel"按钮
5. 下载并检查导出文件

**预期结果：**
- ✅ 导出功能正常
- ✅ Excel文件包含完整宿舍信息
- ✅ 表头格式正确：宿舍ID、建筑ID、楼层、房间号、房间类型、床位数、当前入住、状态
- ✅ 数据内容准确

### 3. 缴费记录导出
**测试步骤：**
1. 以管理员身份登录
2. 进入"数据导出"页面
3. 选择"缴费记录导出"
4. 点击"导出Excel"按钮
5. 下载并检查导出文件

**预期结果：**
- ✅ 导出功能正常
- ✅ Excel文件包含完整缴费记录
- ✅ 表头格式正确：记录ID、学生ID、金额、缴费方式、缴费时间
- ✅ 数据内容准确

### 4. 维修记录导出
**测试步骤：**
1. 以管理员身份登录
2. 进入"数据导出"页面
3. 选择"维修记录导出"
4. 点击"导出Excel"按钮
5. 下载并检查导出文件

**预期结果：**
- ✅ 导出功能正常
- ✅ Excel文件包含完整维修记录
- ✅ 表头格式正确：维修ID、学生ID、宿舍ID、描述、维修类型、紧急程度、状态、创建时间、更新时间
- ✅ 数据内容准确

### 5. 分配记录导出
**测试步骤：**
1. 以管理员身份登录
2. 进入"数据导出"页面
3. 选择"分配记录导出"
4. 点击"导出Excel"按钮
5. 下载并检查导出文件

**预期结果：**
- ✅ 导出功能正常
- ✅ Excel文件包含完整分配记录
- ✅ 表头格式正确：分配ID、学生ID、床位ID、入住日期、退宿日期、状态
- ✅ 数据内容准确

---

## 📊 数据统计功能测试

### 1. 学生统计
**测试步骤：**
1. 以管理员身份登录
2. 进入"数据统计"页面
3. 查看学生统计信息

**预期结果：**
- ✅ 显示学生总数
- ✅ 显示各学院学生分布
- ✅ 显示性别比例
- ✅ 显示图表展示

### 2. 宿舍统计
**测试步骤：**
1. 以管理员身份登录
2. 进入"宿舍统计"页面
3. 查看宿舍使用情况

**预期结果：**
- ✅ 显示宿舍入住率
- ✅ 显示各楼栋使用情况
- ✅ 显示床位使用统计
- ✅ 显示图表展示

### 3. 费用统计
**测试步骤：**
1. 以管理员身份登录
2. 进入"费用统计"页面
3. 查看费用统计信息

**预期结果：**
- ✅ 显示费用收入统计
- ✅ 显示缴费率统计
- ✅ 显示欠费情况
- ✅ 显示图表展示

---

## 🔍 搜索和筛选功能测试

### 1. 学生搜索
**测试步骤：**
1. 以管理员身份登录
2. 进入"学生管理"页面
3. 使用搜索功能：
   - 按学号搜索
   - 按姓名搜索
   - 按学院筛选
   - 按专业筛选

**预期结果：**
- ✅ 搜索结果准确
- ✅ 支持模糊搜索
- ✅ 筛选条件正确
- ✅ 结果实时更新

### 2. 宿舍搜索
**测试步骤：**
1. 以学生身份登录
2. 进入"宿舍搜索"页面
3. 使用筛选功能：
   - 按楼栋筛选
   - 按楼层筛选
   - 按房间类型筛选
   - 按价格范围筛选

**预期结果：**
- ✅ 筛选结果准确
- ✅ 支持多条件组合
- ✅ 结果实时更新
- ✅ 显示可用床位

---

## 📱 移动端适配测试

### 1. 响应式布局
**测试步骤：**
1. 使用手机浏览器访问系统
2. 测试各个页面布局
3. 测试表单输入
4. 测试按钮点击

**预期结果：**
- ✅ 页面自适应屏幕大小
- ✅ 文字清晰可读
- ✅ 按钮大小合适
- ✅ 表单输入正常

### 2. 触摸操作
**测试步骤：**
1. 使用触摸屏设备
2. 测试滑动操作
3. 测试点击操作
4. 测试长按操作

**预期结果：**
- ✅ 滑动流畅
- ✅ 点击响应及时
- ✅ 长按功能正常
- ✅ 手势操作支持

---

## 🚀 性能测试

### 1. 页面加载速度
**测试方法：**
- 使用浏览器开发者工具
- 记录页面加载时间
- 测试不同网络环境

**预期结果：**
- ✅ 首页加载时间 < 3秒
- ✅ 列表页面加载时间 < 2秒
- ✅ 详情页面加载时间 < 1秒

### 2. API响应时间
**测试方法：**
- 使用Postman或curl测试
- 记录API响应时间
- 测试并发请求

**预期结果：**
- ✅ 登录API响应时间 < 1秒
- ✅ 查询API响应时间 < 500ms
- ✅ 支持100并发用户

### 3. 数据库性能
**测试方法：**
- 测试大数据量查询
- 测试复杂查询语句
- 监控数据库性能

**预期结果：**
- ✅ 查询响应时间 < 1秒
- ✅ 支持1000+学生数据
- ✅ 数据库连接稳定

---

## 🔒 安全测试

### 1. 身份验证
**测试步骤：**
1. 尝试访问需要登录的页面
2. 使用无效token访问API
3. 测试token过期处理

**预期结果：**
- ✅ 未登录用户被重定向到登录页
- ✅ 无效token返回401错误
- ✅ 过期token自动刷新或重新登录

### 2. 权限控制
**测试步骤：**
1. 以学生身份尝试访问管理员功能
2. 以管理员身份测试权限边界
3. 测试跨用户数据访问

**预期结果：**
- ✅ 学生无法访问管理员功能
- ✅ 管理员权限正确
- ✅ 用户只能访问自己的数据

### 3. 数据安全
**测试步骤：**
1. 检查敏感数据加密
2. 测试SQL注入防护
3. 测试XSS攻击防护

**预期结果：**
- ✅ 密码加密存储
- ✅ 防止SQL注入
- ✅ 防止XSS攻击

---

## 🐛 错误处理测试

### 1. 网络错误
**测试步骤：**
1. 断开网络连接
2. 测试页面功能
3. 恢复网络连接

**预期结果：**
- ✅ 显示网络错误提示
- ✅ 提供重试机制
- ✅ 网络恢复后自动重连

### 2. 服务器错误
**测试步骤：**
1. 停止后端服务
2. 测试前端功能
3. 重启后端服务

**预期结果：**
- ✅ 显示服务器错误提示
- ✅ 提供友好的错误信息
- ✅ 服务恢复后功能正常

### 3. 数据验证
**测试步骤：**
1. 输入无效数据
2. 测试表单验证
3. 测试边界值

**预期结果：**
- ✅ 显示验证错误信息
- ✅ 阻止无效数据提交
- ✅ 提供修正建议

---

## 📋 测试报告模板

### 测试执行记录
| 功能模块 | 测试用例 | 执行结果 | 问题描述 | 修复状态 |
|---------|---------|---------|---------|---------|
| 系统健康 | 健康检查 | ✅ 通过 | - | - |
| 用户认证 | 学生登录 | ✅ 通过 | - | - |
| 用户认证 | 管理员登录 | ✅ 通过 | - | - |
| 用户认证 | 学生注册 | ❌ 未实现 | 功能缺失 | 待开发 |
| 学生管理 | 学生信息查询 | ✅ 通过 | - | - |
| 学生管理 | 学生列表查询 | ✅ 通过 | 返回9条记录 | - |
| 学生管理 | 分页功能 | ✅ 通过 | - | - |
| 宿舍管理 | 宿舍申请 | ⚠️ 未测试 | 需要前端界面 | - |
| 宿舍管理 | 宿舍调换 | ⚠️ 未测试 | 需要前端界面 | - |
| 宿舍管理 | 床位选择 | ❌ 未实现 | 功能缺失 | 待开发 |
| 维修报修 | 维修列表查询 | ✅ 通过 | 返回10条记录 | - |
| 维修报修 | 维修反馈 | ❌ 未实现 | 功能缺失 | 待开发 |
| 费用管理 | 费用查询 | ⚠️ 未测试 | 需要前端界面 | - |
| 费用管理 | 在线缴费 | ⚠️ 未测试 | 需要前端界面 | - |
| 电费管理 | 电费账单查询 | ✅ 通过 | 返回空数组 | - |
| 电费管理 | 电费提醒设置 | ⚠️ 未测试 | 需要前端界面 | - |
| 电费管理 | 电费缴费 | ⚠️ 未测试 | 需要前端界面 | - |
| 数据导出 | 学生信息导出 | ✅ 通过 | Excel文件4230字节 | - |
| 数据导出 | 宿舍信息导出 | ⚠️ 未测试 | 需要管理员权限 | - |
| 数据导出 | 缴费记录导出 | ⚠️ 未测试 | 需要管理员权限 | - |
| 数据导出 | 维修记录导出 | ⚠️ 未测试 | 需要管理员权限 | - |
| 数据导出 | 分配记录导出 | ⚠️ 未测试 | 需要管理员权限 | - |
| 通知公告 | 查看通知 | ⚠️ API路径问题 | 应使用/my-notifications | 已确认 |
| 通知公告 | 发布通知 | ⚠️ 未测试 | 需要管理员权限 | - |
| 数据统计 | 学生统计 | ⚠️ 未测试 | 需要管理员权限 | - |
| 数据统计 | 宿舍统计 | ⚠️ 未测试 | 需要管理员权限 | - |
| 数据统计 | 费用统计 | ⚠️ 未测试 | 需要管理员权限 | - |

### 问题汇总
| 问题编号 | 问题描述 | 严重程度 | 状态 | 负责人 |
|---------|---------|---------|------|-------|
| BUG-001 | JWT令牌过期频繁 | 中 | 待优化 | 开发者 |
| BUG-002 | 通知API路径错误 | 低 | 已确认 | 开发者 |
| BUG-003 | 学生注册功能缺失 | 高 | 待开发 | 开发者 |
| BUG-004 | 床位选择功能缺失 | 高 | 待开发 | 开发者 |
| BUG-005 | 维修反馈功能缺失 | 中 | 待开发 | 开发者 |

### 测试结论
- ✅ 系统健康检查正常
- ✅ 用户认证系统稳定（学生/管理员登录）
- ✅ 学生信息管理功能完整（查询、列表、分页）
- ✅ 电费管理系统API正常（账单查询）
- ✅ 数据导出功能正常（Excel导出）
- ✅ 维修管理系统API正常（列表查询）
- ✅ 数据库字段匹配问题已完全解决
- ⚠️ JWT令牌过期频繁，需要优化
- ⚠️ 通知系统API路径需要修正
- ❌ 部分PRD要求功能未实现（学生注册、床位选择、维修反馈等）
- ⚠️ 需要前端界面配合完成完整测试

---

## 🎯 测试最佳实践

### 1. 测试前准备
- 确保测试环境稳定
- 准备测试数据
- 熟悉系统功能
- 制定测试计划

### 2. 测试执行
- 按模块逐步测试
- 记录测试结果
- 截图保存问题
- 及时反馈问题

### 3. 测试后总结
- 整理测试报告
- 分析问题原因
- 提出改进建议
- 跟踪问题修复

---
*最后更新：2025-09-25*
